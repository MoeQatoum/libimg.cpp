cmake_minimum_required(VERSION 3.27)

set(CMAKE_CXX_STANDARD 23)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

set(LIB_STB_IMG stb_img CACHE INTERNAL "stb project name")
set(LIB_STB_IMG_INCLUDE_DIR ${CMAKE_CURRENT_LIST_DIR} CACHE INTERNAL "stb_img include directory")
set(LIB_STB_IMG_RELEASE_OPTIONS CACHE STRING "-O3")
set(LIB_STB_IMG_DEBUG_OPTIONS CACHE STRING "-O0 -g")

project(
    ${LIB_STB_IMG}
    LANGUAGES CXX
)

file(GLOB_RECURSE LIB_STB_IMG_SOURCES
    ${LIB_STB_IMG_INCLUDE_DIR}/*.cpp
)

add_library(${LIB_STB_IMG} STATIC ${LIB_STB_IMG_SOURCES})

# set_target_properties(${LIB_STB_IMG} PROPERTIES LINKER_LANGUAGE CXX)

target_include_directories(${LIB_STB_IMG} PUBLIC ${LIB_STB_IMG_INCLUDE_DIR})

target_compile_options(${LIB_STB_IMG}
    PRIVATE $<$<COMPILE_LANGUAGE:CXX>:$<$<CONFIG:RELEASE>: ${LIB_STB_IMG_RELEASE_OPTIONS}>>
    PRIVATE $<$<COMPILE_LANGUAGE:CXX>:$<$<CONFIG:DEBUG>:   ${LIB_STB_IMG_DEBUG_OPTIONS}>>
)
